<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Menu</title>

    <!-- Load Bootstrap first -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Then your custom CSS -->
    <link rel="stylesheet" href="/styles/navbar.css" />
    <link rel="stylesheet" href="/styles/menu.css" />
    <link rel="stylesheet" href="/styles/footer.css" />
  </head>
  <body>
    <!-- Navbar Placeholder with loading state -->
    <div data-include-html="/includes/navbar.html">
      <div class="loading-placeholder"></div>
    </div>

    <!-- Menu Section -->
    <section id="menu" class="menu-section py-5">
      <div class="container">
        <div class="row g-4">
          <div class="col-lg-3 col-md-4 order-md-1 order-2">
            <div class="sidebar p-3 mt-4 mt-md-0 bg-transparent">
              <h3 class="sidebar-title mb-4">Menu</h3>
              <ul class="list-unstyled">
                <li>
                  <a
                    href="#"
                    class="sidebar-item text-dark d-block mb-2 category-filter"
                    data-category="Cakes"
                    >Cakes</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="sidebar-item text-dark d-block mb-2 category-filter"
                    data-category="Pastries"
                    >Pastries</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="sidebar-item text-dark d-block mb-2 category-filter"
                    data-category="Rice Meals"
                    >Rice Meals</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="sidebar-item text-dark d-block mb-2 category-filter"
                    data-category="Snacks"
                    >Snacks</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="sidebar-item text-dark d-block mb-2 category-filter"
                    data-category="Drinks"
                    >Drinks</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="sidebar-item text-dark d-block mb-2 category-filter"
                    data-category=""
                    >All</a
                  >
                </li>
              </ul>
            </div>
          </div>
          <div class="col-lg-9 col-md-8 order-md-2 order-1">
            <div
              class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4"
            >
              <h1 class="menu-title mb-3 mb-md-0">Menu</h1>
              <div class="d-flex flex-column flex-sm-row gap-2">
                <input
                  type="text"
                  class="form-control search-input"
                  placeholder="Search"
                />
                <select class="form-select sort-select">
                  <option value="">Sort By</option>
                  <option value="price-asc">Price: Low to High</option>
                  <option value="price-desc">Price: High to Low</option>
                  <option value="name-asc">Name: A to Z</option>
                  <option value="name-desc">Name: Z to A</option>
                </select>
              </div>
            </div>
            <div class="row g-4" id="menuItems"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer Placeholder with loading state -->
    <div data-include-html="/includes/footer.html">
      <div class="loading-placeholder"></div>
    </div>

    <!-- Load scripts efficiently -->
    <script>
      // Load non-critical scripts after page is interactive
      function loadScript(src, async = true) {
        return new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = src;
          script.async = async;
          script.onload = resolve;
          script.onerror = reject;
          document.body.appendChild(script);
        });
      }

      // Load scripts in order of priority
      window.addEventListener("load", function () {
        loadScript("/scripts/environment-config.js")
          .then(() => loadScript("/scripts/include-html.js"))
          .then(() => loadScript("/scripts/update-navbar.js"))
          .then(() => loadScript("/scripts/menu.js"))
          .then(() => {
            // Initialize page functionality after all scripts are loaded
            if (typeof initializePage === "function") {
              initializePage();
            }
          });
      });
    </script>

    <!-- Remove loading placeholders when includes are loaded -->
    <script>
      document.addEventListener("html-includes-loaded", function () {
        document.querySelectorAll(".loading-placeholder").forEach((el) => {
          el.style.display = "none";
        });
      });
    </script>

    <!-- Bootstrap loaded last as it's not critical for initial render -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
  </body>
</html>
